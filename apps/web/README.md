# Nostr神社 Web UI

Nostr神社のSvelteKit SPAフロントエンドです。

## 🚀 セットアップ

### 1. 依存関係のインストール

```bash
cd apps/web
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスしてください。

### 3. ビルド（本番用）

```bash
npm run build
```

ビルドされたファイルは `build/` ディレクトリに出力されます。

## 🎯 機能

### 参拝機能
- **鍵ペア生成**: 新しいNostr鍵ペアの生成・管理
- **神社選択**: 複数の神社から参拝先を選択
- **参拝メッセージ**: 願いや感謝の気持ちを入力
- **参拝実行**: Nostrイベントとして参拝を記録
- **証明書受取**: 神社からの公式参拝証明書を受取

### 参拝履歴
- **履歴表示**: 過去の参拝記録を時系列で表示
- **検索機能**: 参拝メッセージや神社名で検索
- **ソート機能**: 日時順・神社順での並び替え
- **統計表示**: 参拝回数や神社数などの統計情報

### 参拝証明書
- **証明書一覧**: 取得した参拝証明書の一覧表示
- **詳細表示**: 証明書の詳細情報をモーダルで表示
- **ダウンロード**: 証明書データのJSONエクスポート
- **印刷対応**: 証明書の印刷機能

### 神社管理
- **接続設定**: 神社バックエンドのURL設定
- **接続テスト**: 神社への接続確認
- **統計表示**: 参拝統計の確認
- **データ管理**: ローカルデータのエクスポート・削除

## 🏗️ 技術構成

- **フレームワーク**: SvelteKit
- **ビルドツール**: Vite
- **言語**: TypeScript
- **スタイル**: CSS（カスタムプロパティ使用）
- **Nostrライブラリ**: nostr-tools v2.7.0
- **デプロイ**: 静的サイト（SPA）

## 📁 ディレクトリ構成

```
src/
├── lib/
│   └── nostr.ts          # Nostr関連のユーティリティ関数
├── routes/
│   ├── +layout.svelte    # アプリケーション全体のレイアウト
│   ├── +layout.ts        # SPA設定
│   ├── +page.svelte      # 参拝ページ（メイン）
│   ├── history/
│   │   └── +page.svelte  # 参拝履歴ページ
│   ├── certificates/
│   │   └── +page.svelte  # 参拝証明書ページ
│   └── shrine/
│       └── +page.svelte  # 神社管理ページ
├── app.html              # HTMLテンプレート
└── app.css               # グローバルスタイル
```

## 🎨 デザインシステム

### カラーパレット
- **朱色** (`#c73e1d`): メインカラー、アクセント
- **金色** (`#e6b422`): セカンダリカラー、強調
- **象牙色** (`#f5f5dc`): 背景、カード
- **墨色** (`#2c2c2c`): テキスト、見出し
- **利休鼠** (`#8b8680`): サブテキスト

### コンポーネント
- **ボタン**: プライマリ・セカンダリスタイル
- **カード**: 影付きカードレイアウト
- **フォーム**: 統一されたフォーム要素
- **モーダル**: オーバーレイ式モーダル

## 🔧 設定

### 神社バックエンド接続
デフォルトでは `http://localhost:8787` に接続します。
神社管理ページから接続先URLを変更できます。

### データ保存
- **参拝履歴**: ブラウザのローカルストレージ
- **鍵ペア**: ブラウザのローカルストレージ
- **参拝証明書**: Nostrネットワーク上に永続保存

### 環境変数
現在、環境変数は使用していません。すべての設定はUI上で行います。

## 📱 レスポンシブ対応

- **デスクトップ**: 1200px以上
- **タブレット**: 768px-1199px
- **モバイル**: 767px以下

すべてのページでレスポンシブデザインに対応しています。

## 🔒 セキュリティ

- **鍵管理**: 秘密鍵はローカルストレージに保存
- **署名検証**: すべてのNostrイベントの署名を検証
- **HTTPS推奨**: 本番環境ではHTTPS接続を推奨

## 🚀 デプロイ

### 静的ホスティング
SvelteKitのstatic adapterを使用してSPAとしてビルドされます。

```bash
npm run build
```

生成された `build/` ディレクトリを以下のサービスにデプロイできます：
- Vercel
- Netlify
- GitHub Pages
- Cloudflare Pages

### 設定例（Vercel）
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "build",
  "framework": "sveltekit"
}
```

## 🤝 開発

### 開発環境
```bash
# 開発サーバー起動
npm run dev

# 型チェック
npm run check

# 型チェック（ウォッチモード）
npm run check:watch
```

### コーディング規約
- TypeScriptを使用
- Svelteの推奨パターンに従う
- CSS変数を使用したテーマシステム
- レスポンシブファーストのデザイン

## 📄 ライセンス

MIT License - 詳細は [LICENSE](../../LICENSE) ファイルを参照してください。
